import{d as z,k as B,V as E,C as F,W as M}from"./s5kuwhN6.js";import{h as _}from"./CDY68bNc.js";import{v as $,L as b,f as y,g as L,h as P,x as S,o as V,c as W,a as A,r as G,F as N}from"./DPLBeim1.js";const D={__name:"Renderer",props:{autoRender:{default:!0},autoResize:{default:!0},antialias:{default:!1},stencil:{default:!1}},emits:["setupComplete"],setup(m,{expose:p,emit:f}){function h(t,n,a){return Math.min(a,Math.max(n,t))}const o=m,i=$(null);let e;const v=z(),s=B({fov:45,near:.1,far:100}),l=E();l.layers.set(1);const u=new F;u.start(),s.position.z=l.position.z=5;const r=[],C=(t,n=1/0)=>{r.push({fn:t,index:n}),r.sort((a,w)=>a.index-w.index)},R=t=>{const n=r.find(a=>a.fn===t);r.splice(n,1)},d=({width:t,height:n})=>{const a=h(window.devicePixelRatio,1,2);e.setSize(t,n),e.setPixelRatio(a)},c={scene:v,camera:s,orthoCamera:l,clock:u,registerRenderFn:C,unregisterRenderFn:R,resize:d},x=()=>{e=new M({antialias:o.antialias,stencil:o.stencil}),e.autoClear=!1,e.setClearAlpha(0),c.renderer=e,k("setupComplete",{renderer:e})},g=()=>{e&&r.forEach(t=>{var n;(n=t.fn)==null||n.call(t,{renderer:e,camera:s})})};_(()=>{o.autoRender&&g()}),o.autoResize&&b(d,!0),y(()=>{x()}),L(()=>{i.value.appendChild(e.domElement),window.camera=s}),P(()=>{i.value.removeChild(e.domElement),e.dispose()});const k=f;return p({provider:c,resize:d}),S("renderer",c),(t,n)=>(V(),W(N,null,[A("div",{ref_key:"glContainer",ref:i,class:"gl"},null,512),G(t.$slots,"default")],64))}};export{D as n};
